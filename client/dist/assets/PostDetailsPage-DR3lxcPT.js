import{c as o,b as t,a as l,d as I,r as a,o as N,i as V,F as b,h as w,w as A,j as R,t as i,e as y,u as U,k as j}from"./index-BPnE_UG1.js";import{u as E}from"./method-BCboZ13h.js";function F(f,n){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z"})])}const S={class:"space-y-4"},T={class:"text-gray-400"},z={class:"font-bold text-gray-900"},H={class:"flex items-center justify-between"},M={class:"space-y-2"},Z={class:"text-lg font-bold"},q={class:"flex flex-col gap-1 text-sm"},G={key:0},J={class:"text-xs"},K={class:"flex items-center gap-2"},O={class:"rounded-lg bg-white p-4"},X=I({__name:"PostDetailsPage",props:{id:{}},setup(f){const n=U(),c=f,s=a(),u=a(),p=a(!1),d=a(!1),v=a(!1),g=a(!1),_=a(!1);async function P(){g.value=!0,await n.deletePost(c.id),g.value=!1}async function k(){v.value=!0,await n.draftPost(c.id),v.value=!1}async function C(){_.value=!0,await n.publishPost(c.id),_.value=!1}async function B(){console.log("edit post")}async function L(){p.value=!0;const{data:r}=await n.getPostById(c.id);if(s.value=r,p.value=!1,r){d.value=!0;const{data:e}=await n.getUserById(r.userId);u.value=e}d.value=!1}return N(L),(r,e)=>{var h,m,x;const D=R("RouterLink");return l(),o("div",S,[s.value?(l(),o(b,{key:0},[t("ul",null,[t("li",T,[w(D,{to:"/"},{default:A(()=>e[0]||(e[0]=[j("Posts")])),_:1})]),t("li",z,i(s.value.title),1)]),t("div",H,[t("div",M,[t("h1",Z,i(s.value.title),1),t("h2",q,[d.value?(l(),o("span",G,"Loading...")):(l(),o(b,{key:1},[e[1]||(e[1]=t("span",{class:"font-bold"},"Author:",-1)),t("span",null,i(((h=u.value)==null?void 0:h.lastname)+""+((m=u.value)==null?void 0:m.firstname)),1),t("span",null,i((x=u.value)==null?void 0:x.email),1)],64))]),t("h5",J,"added"+i(y(E)(s.value.createdAt)),1)]),t("div",K,[s.value.status==="PUBLISH"?(l(),o("button",{key:0,class:"bg-yellow-500 text-white",onClick:k}," draft ")):(l(),o("button",{key:1,class:"bg-green-500 text-white",onClick:C}," publish ")),t("button",{class:"bg-blue-500 text-white",onClick:B},[w(y(F),{class:"size-4"}),e[2]||(e[2]=t("span",null,"Edit",-1))]),t("button",{class:"bg-red-500 text-white",onClick:P}," delete ")])]),t("div",O,i(s.value.content),1)],64)):V("",!0)])}}});export{X as default};
